"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[853],{5853:(t,e,a)=>{a.r(e),a.d(e,{default:()=>c});var i=a(9669),n=a.n(i);const s={components:{},data:function(){return{loadingData:!0,search:"",tickets:[],ticketDetail:null,detailTicketDialog:!1,headers:[{text:"Tiket",align:"start",value:"current_step.inbox"},{text:"Zadání",value:"detail"},{text:"Vytvořeno",value:"created_at"},{text:"Stav",value:"current_step"},{text:"",value:"actions"}]}},created:function(){this.index()},methods:{index:function(){var t=this;this.tickets=[],this.loadingData=!0,n().get("tickets").then((function(e){t.tickets=e.data.data,t.loadingData=!1}))},activesTicket:function(){this.index()},archivesTickets:function(){var t=this;this.tickets=[],this.loadingData=!0,n().get("tickets/closed").then((function(e){t.tickets=e.data.data,t.loadingData=!1}))},getDetail:function(t){return void 0!==(null==t?void 0:t.detail)?t.detail.data:void 0!==(null==t?void 0:t.ticket)?t.ticket.data.detail:void 0},formatDate:function(t){var e=new Date(t),a=""+(e.getMonth()+1),i=""+e.getDate(),n=e.getFullYear();return a.length<2&&(a="0"+a),i.length<2&&(i="0"+i),[n,a,i].join("-")},openTicketDetail:function(t){this.ticketDetail=t,this.detailTicketDialog=!0},closeDialog:function(){this.detailTicketDialog=!1,this.ticketDetail=null}}};const c=(0,a(1900).Z)(s,(function(){var t=this,e=t._self._c;return e("div",[e("v-row",[e("v-col",{attrs:{cols:"12",sm:"12",md:"12",lg:"12"}},[e("v-card",{staticClass:"overflow-hidden rounded-xl blur shadow-blur",attrs:{flat:""}},[e("v-card-text",{staticClass:"text--center"},[e("v-container",{attrs:{fluid:""}},[e("v-row",[e("v-col",{attrs:{cols:"12",sm:"12",md:"12",lg:"12"}},[e("v-tabs",{attrs:{centered:"","background-color":"transparent",color:"info"}},[e("v-tab",{on:{click:function(e){return t.activesTicket()}}},[t._v("Aktivní")]),t._v(" "),e("v-tab",{on:{click:function(e){return t.archivesTickets()}}},[t._v("Archivované")])],1)],1),t._v(" "),e("v-col",{attrs:{cols:"12",sm:"12",md:"12",lg:"12"}},[t.tickets.error?e("div",[e("v-alert",{attrs:{type:"info"}},[t._v("\n                                        Nenalezeny tikety\n                                    ")])],1):e("div",[e("v-col",{attrs:{cols:"12",sm:"12",md:"6",lg:"6"}},[e("v-text-field",{attrs:{placeholder:"Vyhledat tiket",dense:"",autofocus:"",clearable:""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._v(" "),e("v-data-table",{attrs:{headers:t.headers,items:t.tickets,search:t.search,loading:t.loadingData,"loading-text":"Načítání Vašich tiketů"},scopedSlots:t._u([{key:"item.current_step.inbox",fn:function(a){var i=a.item;return[e("span",{domProps:{innerHTML:t._s(i.current_step.inbox)}})]}},{key:"item.detail",fn:function(a){var i=a.item;return[e("span",{domProps:{innerHTML:t._s(t.getDetail(i.variables))}})]}},{key:"item.created_at",fn:function(a){var i=a.item;return[e("span",[t._v(t._s(t.formatDate(i.created_at)))])]}},{key:"item.current_step",fn:function(a){var i=a.item;return[e("span",[t._v("\n                                                "+t._s(i.current_step.name)+"\n                                            ")])]}},{key:"item.actions",fn:function(a){var i=a.item;return[e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(a){var n=a.on,s=a.attrs;return[e("v-icon",t._g(t._b({attrs:{small:"",color:"info"},on:{click:function(e){return t.openTicketDetail(i)}}},"v-icon",s,!1),n),[t._v("mdi-magnify")])]}}],null,!0)},[t._v(" "),e("span",[t._v("Detail tiketu")])])]}}])})],1)])],1)],1)],1)],1)],1)],1),t._v(" "),e("v-row",{attrs:{justify:"center"}},[e("v-dialog",{attrs:{persistent:"","max-width":"800"},model:{value:t.detailTicketDialog,callback:function(e){t.detailTicketDialog=e},expression:"detailTicketDialog"}},[null!=t.ticketDetail?e("v-card",[e("v-card-title",{staticClass:"text-h5"},[e("span",{staticClass:"black--text",domProps:{innerHTML:t._s(t.ticketDetail.current_step.inbox)}})]),t._v(" "),e("v-card-text",t._l(t.ticketDetail.discussion,(function(a){return e("v-col",{key:a.id,attrs:{cols:"12"}},[e("v-card",{directives:[{name:"show",rawName:"v-show",value:a.message.includes("Email zákazníkovi")||a.message.includes("Odchozí email pro"),expression:"\n                                discussion.message.includes(\n                                    'Email zákazníkovi'\n                                ) ||\n                                discussion.message.includes(\n                                    'Odchozí email pro'\n                                )\n                            "}],attrs:{flat:""}},[e("v-card-text",[e("p",{domProps:{innerHTML:t._s(a.message)}}),t._v(" "),e("v-divider")],1),t._v(" "),e("v-card-actions",[e("v-spacer"),t._v(" "),e("span",{staticClass:"text-caption mx-2"},[t._v("Řešitel:\n                                ")]),t._v(" "),e("span",{staticClass:"text-caption font-weight-medium",domProps:{innerHTML:t._s(a.author.fullname)}})],1)],1)],1)})),1),t._v(" "),e("v-card-actions",[e("v-spacer"),t._v(" "),e("v-btn",{attrs:{color:"blue darken-1 rounded-lg"},on:{click:function(e){return t.closeDialog()}}},[e("span",{staticClass:"white--text"},[t._v(" Zavřít ")])])],1)],1):t._e()],1)],1)],1)}),[],!1,null,null,null).exports}}]);